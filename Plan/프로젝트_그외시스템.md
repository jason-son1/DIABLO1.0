__디아블로 IV 시스템 아키텍처의 마인크래프트 서버 이식 및 구현에 관한 심층 기술 보고서__

__1. 서론: 프로젝트 개요 및 설계 철학__

__1.1 보고서의 목적 및 범위__

본 기술 보고서는 블리자드 엔터테인먼트의 액션 RPG *디아블로 IV(Diablo IV)*의 핵심 게임플레이 루프와 오픈 월드 시스템을 _마인크래프트(Minecraft)_ 서버 환경 내에서 재구축하기 위한 포괄적인 아키텍처 설계를 다룬다. 본 연구의 범위는 클라이언트의 요구사항에 따라 캐릭터의 직업(Class), 전투 공식(Combat Formulas), 장비 아이템의 스탯(Itemization), 그리고 몬스터의 개별 데이터(Bestiary)를 제외한, **"세계의 구조와 플레이어의 상호작용 시스템"**에 집중한다.

구체적으로 분석 대상이 되는 시스템은 다음과 같다:



1. __지역 진척도 및 탐험 보상 (Renown System):__ 명망 시스템과 릴리트의 제단.
2. __동적 위상 변화 및 인스턴스 (Phasing & Strongholds):__ 보루 점령에 따른 세계의 영구적 변화.
3. __시간 제한적 월드 이벤트 (Helltides):__ 지옥물결의 환경 변화와 변종 화폐 경제.
4. __순환형 현상금 시스템 (Tree of Whispers):__ 속삭임의 나무와 절차적 퀘스트 생성.
5. __인스턴스 던전 및 변수 제어 (Nightmare Dungeons):__ 악몽 던전의 인장(Sigil)과 속성(Affix) 구현.
6. __추출 기반 PvP 시스템 (Fields of Hatred):__ 증오의 전장과 재화 추출 리스크 메커니즘.
7. __네러티브 및 상호작용 (Narrative Delivery):__ 시네마틱 연출, 등반/도약 등 지형 상호작용.

__1.2 핵심 설계 철학: 정적 샌드박스에서 동적 라이브 서비스로__

마인크래프트의 기본 서버 구조는 본질적으로 '정적(Static)'이다. 모든 플레이어는 동일한 시점에 동일한 블록 상태를 공유한다. 반면, 디아블로 IV는 '동적(Dynamic)'이며 '위상(Phase)' 중심적이다. A 플레이어에게는 폐허로 보이는 마을이, 해당 지역의 퀘스트를 완료한 B 플레이어에게는 활기찬 교역소로 보여야 한다.<sup>1</sup>

따라서 본 보고서가 제안하는 서버 아키텍처의 핵심은 **"상태 기반 렌더링(State-Based Rendering)"**이다. 서버는 플레이어의 데이터베이스 상의 진척도(State)를 실시간으로 확인하여, 패킷(Packet) 단위로 서로 다른 시각적 정보와 상호작용 요소를 제공해야 한다. 이는 단순한 RPG 플러그인의 조합을 넘어, 데이터베이스와 연동된 정교한 스크립팅과 인스턴스 관리 기술을 요구한다.<sup>2</sup>


---

__2. 명망(Renown) 시스템: 탐험과 진척도의 데이터화__

디아블로 IV의 명망 시스템은 플레이어의 탐험 욕구를 자극하고, 이를 캐릭터의 스펙 상승(스킬 포인트, 물약 용량 등)과 직결시키는 메타 프로그레션(Meta-Progression) 시스템이다. 마인크래프트 RPG 서버에서 이를 구현하기 위해서는 단순한 '발견'을 넘어선 데이터 추적 및 보상 지급 로직이 필요하다.

__2.1 데이터 구조 및 스코어링 매트릭스__

명망 시스템은 각 지역(예: 조각난 봉우리, 스코스글렌)별로 독립적인 점수 집계를 요구한다.<sup>4</sup> 이를 위해 관계형 데이터베이스(MySQL/MariaDB)에 다음과 같은 스키마 설계가 선행되어야 한다.



* __테이블 구조 설계:__
* ren_discovery: 플레이어가 방문한 하위 지역(Sub-zone)의 ID와 방문 시간을 기록.
* ren_objectives: 완료한 퀘스트, 던전, 보루 등의 고유 ID와 완료 상태(Boolean)를 기록.
* ren_altars: 상호작용한 릴리트 제단의 ID와 적용된 스탯 보너스 유형을 기록.
* ren_summary: 각 지역별 총 명망 점수와 현재 해금된 보상 티어(1~5단계)를 기록.

각 활동에 따른 점수 배점은 원작의 밸런싱을 그대로 차용하여 플레이 호흡을 조절한다 <sup>5</sup>:


<table>
  <tr>
   <td><strong>활동 유형 (Activity Type)</strong>
   </td>
   <td><strong>명망 포인트 (Renown Points)</strong>
   </td>
   <td><strong>마인크래프트 구현 기술 (Implementation Logic)</strong>
   </td>
  </tr>
  <tr>
   <td><strong>지역 발견 (Area Discovered)</strong>
   </td>
   <td>5
   </td>
   <td>WorldGuard 리전 진입 이벤트 리스너 (RegionEnterEvent)와 DB 조회 연동. 최초 진입 시 Title 메시지 출력 및 포인트 가산.
   </td>
  </tr>
  <tr>
   <td><strong>릴리트의 제단 (Altar of Lilith)</strong>
   </td>
   <td>10
   </td>
   <td>커스텀 블록 모델(Oraxen/ItemsAdder) 우클릭 이벤트. 영구적 스탯 부여 스크립트 실행.
   </td>
  </tr>
  <tr>
   <td><strong>웨이포인트 (Waypoint)</strong>
   </td>
   <td>20
   </td>
   <td>순간이동 거점 상호작용. GUI 맵에 해당 노드 활성화 상태 저장.
   </td>
  </tr>
  <tr>
   <td><strong>부가 퀘스트 (Side Quest)</strong>
   </td>
   <td>20
   </td>
   <td>NPC 대화 및 BetonQuest/Quests 플러그인 퀘스트 완료 트리거 연동.
   </td>
  </tr>
  <tr>
   <td><strong>던전 완료 (Dungeon)</strong>
   </td>
   <td>30
   </td>
   <td>MythicDungeons 인스턴스 클리어 시 보상 지급 단계에서 스크립트 실행.
   </td>
  </tr>
  <tr>
   <td><strong>보루 점령 (Stronghold)</strong>
   </td>
   <td>100
   </td>
   <td>위상 변화 스크립트 완료 시 지급 (상세 내용은 3장 참조).
   </td>
  </tr>
</table>


__2.2 보상 체계의 이원화: 캐릭터 vs 계정__

디아블로 IV 명망 시스템의 가장 큰 특징은 보상이 '캐릭터 귀속'과 '계정(서버) 귀속'으로 나뉜다는 점이다.<sup>6</sup> 이는 마인크래프트 서버에서 "부캐릭터(Alt Character)" 육성을 장려하는 중요한 장치가 된다.



1. __캐릭터 보상 (즉각적 보상):__
* __골드 및 경험치:__ 각 명망 단계 도달 시 Vault 플러그인을 통해 경제 재화를 지급하고, MMOCore나 AuraSkills 등을 통해 경험치를 지급한다. 이는 캐릭터별로 독립적으로 수령 가능하다.

2.              __계정 보상 (영구적 보상):__



* __스킬 포인트 (Skill Points):__ 계정 내 모든 캐릭터가 공유하는 데이터 테이블을 참조해야 한다. 플레이어가 접속할 때(PlayerJoinEvent), 서버는 account_rewards 테이블을 조회하여 해당 계정이 해금한 총 스킬 포인트 수를 계산하고, 현재 캐릭터의 가용 스킬 포인트에 가산해야 한다.<sup>7</sup>
* __물약 용량 (Potion Charges):__ 마인크래프트에서는 통상적으로 물약이 아이템으로 존재한다. 이를 디아블로 식으로 구현하려면, 커스텀 플러그인을 통해 '물약 가방' 기능을 만들거나, 핫바(Hotbar)의 특정 슬롯에 쿨타임이 있는 '재사용 물약 아이템'을 지급하되, 그 최대 충전 횟수(Max Stack Size or NBT Tag)를 명망 보상으로 증가시키는 방식이 적합하다.
* __최대 은화(Obols) 증가:__ 도박 재화인 은화의 소지 한도를 늘린다. 이는 화폐 플러그인의 Max Balance 설정을 동적으로 수정하는 스크립트로 구현된다.<sup>4</sup>
* __정복자 포인트 (Paragon Points):__ 50레벨 이후의 엔드 게임 스탯 시스템으로, 마인크래프트에서는 영구적인 속성(Attribute) 보너스나 특수 패시브 노드 해금권으로 치환할 수 있다.

__2.3 릴리트의 제단: 스탯 보너스와 탐험 유도__

릴리트의 제단은 전 세계에 160개가 존재하며, 발견 시 모든 캐릭터에게 영구적인 스탯 보너스를 제공한다.<sup>8</sup>



* __구현 방법론:__
* __시각적 요소:__ _ItemsAdder_나 _Oraxen_을 사용하여 붉은 안광이 도는 석상 모델을 배치한다.
* __상호작용 로직:__ 플레이어가 제단을 우클릭하면, 서버는 데이터베이스를 확인한다.
* IF (not collected): 붉은색 파티클 효과와 함께 화면에 "모든 능력치 +2" 등의 텍스트를 띄우고(Title), 해당 플레이어의 영구 속성(AttributeModifiers)을 수정한다.
* IF (collected): "이미 활성화된 제단입니다" 메시지 출력.
* __배치 전략:__ 디아블로 IV와 마찬가지로, 이 제단들은 맵의 구석, 절벽 끝, 덤불 뒤 등 잘 보이지 않는 곳에 배치해야 한다. 이를 통해 플레이어는 맵의 '구석구석'을 탐험하도록 강제된다.<sup>9</sup> 특히 4장에서 다룰 '지형 상호작용(등반/도약)' 시스템과 결합하여, 특정 이동 기술을 써야만 도달할 수 있는 곳에 배치함으로써 탐험의 깊이를 더할 수 있다.


---

__3. 보루(Stronghold) 및 위상 변화(Phasing): 동적 월드 구축__

보루 시스템은 디아블로 IV의 오픈 월드가 살아있음을 느끼게 하는 핵심 기믹이다. 플레이어는 악마들에게 점령당한 지역을 소탕하고, 이를 안전한 마을로 변화시킨다. 이때 중요한 점은, 보루를 클리어한 플레이어와 그렇지 않은 플레이어가 같은 좌표에 있지만 서로 다른 풍경(폐허 vs 마을)을 본다는 점이다.<sup>1</sup>

__3.1 마인크래프트에서의 위상 변화(Phasing) 기술적 난제와 해결__

마인크래프트 자바 에디션 서버는 기본적으로 청크(Chunk) 단위로 맵 데이터를 전송하므로, 동일 위치의 두 플레이어에게 서로 다른 블록을 보여주는 것은 기술적으로 매우 까다롭다. 이를 해결하기 위해 두 가지 접근법을 혼용해야 한다.

__3.1.1 하이브리드 인스턴싱 (Hybrid Instancing) 전략__

완벽한 블록 단위 페이징(Phasing)은 클라이언트의 예측 이동(Client-side prediction)과 충돌하여 '고스트 블록(Ghost Block)' 현상을 유발할 수 있다. 따라서 다음과 같은 하이브리드 모델을 권장한다.



1. __적대적 상태 (인스턴스 월드):__ 보루를 아직 클리어하지 않은 플레이어가 해당 지역(Region_A)에 진입하면, 서버는 이를 감지하고 플레이어를 Region_A_Instance라는 별도의 월드로 투명하게 텔레포트시킨다.
* 이곳은 몬스터가 가득하고, 건물이 파괴되어 있으며, 어두운 조명과 안개 효과가 적용된 맵이다.
* 플레이어는 이곳에서 보스 몬스터를 처치하고 '방랑자의 성소' 종을 울리는 퀘스트를 수행한다.<sup>1</sup>

2.              __평화 상태 (메인 월드):__ 보루 점령 퀘스트를 완료하면, 플레이어는 다시 메인 월드의 동일 좌표로 이동된다.



* 메인 월드의 해당 지역은 이미 '복구된 마을'로 구축되어 있다. 대장장이, 웨이포인트, 퀘스트 NPC가 존재한다.
* 결과적으로, 보루를 깬 사람들은 메인 월드에서 서로를 볼 수 있고(파티 플레이 가능), 깨지 않은 사람들은 각자의(혹은 파티 단위의) 인스턴스에서 전투를 치르게 된다. 이는 DungeonsXL이나 MythicDungeons의 인스턴스 기능을 활용하여 구현 가능하다.<sup>12</sup>

__3.1.2 NPC 및 엔티티 페이징 (Entity Hiding)__

블록과 달리 NPC(Citizens)나 상호작용 오브젝트는 패킷 조작을 통해 쉽게 숨기거나 보여줄 수 있다.



* __구현:__ Denizen 스크립트나 Citizens의 API를 활용하여, 특정 NPC에게 view_condition을 설정한다.
* 예: NPC_Blacksmith는 player_has_cleared_kor_dragan == true인 플레이어에게만 패킷을 전송한다.
* 이를 통해, 같은 공간에 있더라도 퀘스트 진행도에 따라 상인이 보이거나 보이지 않게 할 수 있다.<sup>14</sup>

__3.2 보루 점령 시나리오 및 연출__

보루 점령 과정은 단순한 전투가 아니라 네러티브가 포함된 이벤트여야 한다.<sup>1</sup>



1. __진입:__ 플레이어가 보루 지역 경계에 들어서면 WorldGuard 플러그인이 이를 감지, "보루 발견: 코르 드라간" 타이틀을 띄우고 배경 음악을 긴장감 있는 트랙으로 교체한다(Resource Pack Region Music).
2. __진행:__ 각 보루는 고유한 기믹을 가진다.
* _예: 종양 파괴._ 맵 곳곳에 배치된 '혈석 종양' 블록(커스텀 모델)을 파괴해야 보스 방의 결계가 해제된다. 이는 MythicMobs의 파괴 가능한 엔티티로 구현할 수 있다.

3.              __해방 의식:__ 보스를 처치한 후, '방랑자의 성소' 오브젝트를 우클릭하면 컷신이 재생된다.



* _컷신 구현:_ Kingscenes 또는 Camera 플러그인을 사용하여 플레이어의 시점을 강제로 이동시키고, 카메라가 마을을 비추는 동안 주변의 불길이 사라지고 마을 사람들이 나타나는 연출을 보여준다.<sup>15</sup>
* 이 컷신이 끝나는 순간, 플레이어의 데이터(db_stronghold_cleared)가 업데이트되고, 평화로운 위상(메인 월드)으로 전환된다.


---

__4. 지옥물결(Helltides): 시공간 제약형 동적 이벤트__

지옥물결은 디아블로 IV의 엔드 게임 오픈 월드 콘텐츠로, 특정 시간 동안 특정 지역의 환경이 변하고 몬스터가 강력해지며 전용 화폐가 드롭되는 시스템이다.<sup>17</sup>

__4.1 스케줄링 및 환경 변화 시스템__

지옥물결은 현실 시간 기준으로 작동한다(예: 60분 지속, 2시간 15분 간격 등). 이를 위해 서버 전체를 관장하는 **글로벌 스케줄러(Global Scheduler)**가 필요하다.



* __타이머 로직:__ 스케줄러는 Active_Region 변수를 주기적으로 변경한다. (예: None -> Scosglen_Coast -> None).
* __환경 변화 (Visuals):__ 지옥물결이 활성화된 지역에 플레이어가 있으면, 서버는 가짜 바이옴 패킷(Fake Biome Packet)을 전송하여 하늘 색깔을 붉게, 물 색깔을 피색으로 변경한다. 또한, MythicMobs를 통해 붉은 비나 잉걸불이 떨어지는 파티클 효과를 해당 지역 전체에 송출하여 시각적 압박감을 조성한다.<sup>17</sup>

__4.2 변종 화폐: 잉걸불(Aberrant Cinders) 경제__

지옥물결의 핵심은 '잉걸불'이라는 임시 화폐를 모으는 것이다.<sup>17</sup>



* __드롭 메커니즘:__ 지옥물결 지역 내의 몬스터는 사망 시 일정 확률로 잉걸불을 드롭한다. 이는 아이템 형태(물리적 아이템)보다는 Scoreboard나 BossBar에 표시되는 가상 화폐로 처리하는 것이 인벤토리 관리에 유리하다. 단, 드롭 시 시각적 만족감을 위해 바닥에 떨어지는 아이템 모델(Item Display)을 생성하고, 플레이어가 근처에 가면 자동으로 수거되면서 수치가 오르도록 구현한다.
* __사망 리스크 (Death Penalty):__ 디아블로 IV와 동일하게, 플레이어 사망 시 보유 잉걸불의 50%를 잃어야 한다. PlayerDeathEvent에서 현재 잉걸불 수치를 확인하고 절반으로 삭감하는 스크립트가 필수적이다.<sup>19</sup>

__4.3 수수께끼의 상자 (Mystery Chests)와 위치 순환__

잉걸불을 소모하는 '고문당하는 선물(Tortured Gifts)' 상자는 지옥물결의 보상이다. 특히 '수수께끼의 상자'는 가장 가치가 높으며 위치가 변동된다.<sup>20</sup>



* __스폰 로직:__ 지옥물결 시작 시, 사전에 정의된 10개의 잠재적 위치 중 2~3곳에 상자 엔티티(Armor Stand + Block Display)를 생성한다.
* __시간 기반 이동:__ 현실 시간으로 정각(XX:00)이 되면, 기존 상자를 제거(Despawn)하고 새로운 위치에 생성한다. 이는 플레이어가 외부 커뮤니티(디스코드 등)를 통해 정보를 공유하도록 유도하는 소셜 기능을 한다.<sup>21</sup>
* __상호작용:__ 상자 클릭 시 Cinders >= 175 조건을 검사한다. 조건 충족 시 화려한 오픈 애니메이션(아이템이 쏟아져 나오는 연출)과 함께 전설 등급 아이템을 지급한다.


---

__5. 속삭임의 나무(Tree of Whispers): 절차적 현상금 시스템__

속삭임의 나무는 플레이어에게 끊임없이 갱신되는 단기 목표를 제공하는 시스템이다.<sup>22</sup> 이는 플레이어가 특정 지역에만 머무르지 않고 전 세계를 순환하게 만드는 동기를 부여한다.

__5.1 현상금(Whispers) 생성 알고리즘__

서버는 90분마다(혹은 정해진 주기마다) 전 세계의 하위 지역에 무작위 목표를 할당해야 한다.



* __목표 유형 (Objectives):__
* _토벌 (Cull):_ 특정 몬스터 50마리 처치.
* _던전 (Dungeon):_ 특정 던전 클리어.
* _수확 (Harvest):_ 몬스터에게서 '베노타의 심장' 등 퀘스트 아이템 100개 수집 (자동 루팅).
* _이벤트 (Event):_ 해당 지역의 동적 이벤트(군단 이벤트 등) 완료.
* __섬뜩한 축복 (Grim Favors):__ 각 임무는 난이도에 따라 1점, 3점, 5점의 포인트를 부여한다.<sup>22</sup>

__5.2 UI 및 추적 시스템 통합__

이 시스템의 핵심은 플레이어가 "어디로 가야 할지" 직관적으로 아는 것이다.



* __지도 통합:__ Dynmap이나 BlueMap 웹 지도, 혹은 인게임 지도 GUI(ImageOnMap 등 활용)에 현재 활성화된 속삭임 임무 지역을 아이콘으로 표시해야 한다.
* __진척도 표시:__ 플레이어가 속삭임 지역에 진입하면, 보스바(BossBar)나 액션바(ActionBar)를 통해 [현재 임무: 잊혀진 해안의 익사자 처치 32/50]와 같은 진행 상황을 실시간으로 보여줘야 한다. 이는 BetonQuest의 변수 추적 기능을 WorldGuard 리전과 연동하여 구현한다.<sup>24</sup>

__5.3 보상 수령 로직__

축복 10개를 모으면 나무로 돌아가 보상을 받는다.



* __보상 선택:__ 나무 NPC와 대화하면 커스텀 GUI가 열리고, 3개의 보상 꾸러미(예: 한손 무기 컬렉션, 카오스 컬렉션) 중 하나를 선택하게 한다. 선택 시 해당 꾸러미 아이템을 지급하고 축복 수치를 0으로 초기화한다.


---

__6. 악몽 던전(Nightmare Dungeons): 인스턴스 던전의 진화__

악몽 던전은 기존 던전에 난이도와 변수(속성)를 더해 리플레이 가치를 높이는 시스템이다.<sup>26</sup>

__6.1 악몽 인장(Nightmare Sigils) 아이템 체계__

플레이어는 '악몽 인장'이라는 아이템을 사용하여 던전을 활성화한다. 이 아이템은 단순한 열쇠가 아니라 던전의 데이터를 담고 있는 컨테이너여야 한다.



* __NBT 데이터 구조:__ 인장 아이템은 다음과 같은 NBT 태그를 포함해야 한다.
* Target_Dungeon: 던전 ID (예: dungeon_shadowed_plunge).
* Tier: 1~100 단계 (몬스터의 레벨과 스탯 스케일링 계수).
* Affix_Positive: 플레이어에게 유리한 효과 (예: 골드 획득량 증가).
* Affix_Negative: 플레이어를 방해하는 효과 (예: 번개 폭풍, 화산).
* __제작 및 분해:__ 비술사 NPC를 통해 인장을 가루로 분해하거나, 가루를 소모하여 랜덤한 인장을 제작하는 크래프팅 시스템이 필요하다.

__6.2 던전 생성 및 속성(Affix) 스크립팅__

인장을 사용하면 MythicDungeons 또는 DungeonsXL 플러그인이 인스턴스 월드를 생성한다.<sup>27</sup> 이때 가장 중요한 것은 인장의 NBT 데이터를 읽어 던전의 규칙을 실시간으로 수정하는 것이다.

__주요 속성(Affix) 구현 예시:__



* __번개 폭풍 (Lightning Storm):__
* _메커니즘:_ 주기적으로 플레이어 위에 번개가 치며, 보호막 안에 들어가야 산다.<sup>28</sup>
* _구현:_ MythicMobs의 타이머 스킬을 활용한다. 던전 시작 시 글로벌 스킬이 활성화되어, 30초마다 플레이어 위치를 타게팅한다. 경고 파티클을 보여주고, 동시에 안전지대(보호막 엔티티)를 근처에 생성한다. 5초 후 안전지대 밖의 플레이어에게 즉사급 데미지를 입힌다.
* __화산 (Volcanic):__
* _메커니즘:_ 전투 중 플레이어 발밑에서 용암이 분출된다.
* _구현:_ 플레이어가 전투 상태(Combat Tag)일 때, 매 10초마다 플레이어 좌표를 가져와 해당 위치에 2초 후 폭발하는 AOE(장판) 스킬을 시전한다.
* __피해 감소/증가:__ 몬스터의 속성 저항이나 공격력을 조절하는 것은 MythicMobs의 DamageModifiers를 인스턴스 생성 시 동적으로 주입하여 해결한다.<sup>29</sup>

__6.3 부활 제한 시스템__

악몽 던전은 긴장감을 위해 부활 횟수를 제한한다(예: 4회).



* __구현:__ 인스턴스 진입 시 Revive_Count 변수를 4로 설정한다. 플레이어 사망 시 이 변수를 차감하고, 0이 되면 던전 실패 처리(강제 퇴장 및 인스턴스 소멸)를 하는 로직이 필요하다. 이는 일반적인 마인크래프트의 무한 부활 메타와 차별화되는 핵심 요소이다.<sup>30</sup>


---

__7. 증오의 전장(Fields of Hatred): PvPvE 추출 시스템__

증오의 전장은 PvP와 PvE가 결합된 고위험 고수익 지역이다. 핵심은 재화를 모아 '정화'하여 영구 소유물로 만드는 과정에서의 긴장감이다.<sup>31</sup>

__7.1 피의 징표(Bloodmarking)와 적대 관계__

이 지역에서는 플레이어 간의 공격 가능 여부가 동적으로 변한다.



* __징표 시스템:__ /pvp 명령어 혹은 감정표현 휠(GUI)을 통해 '피의 징표'를 활성화할 수 있다.
* __팀 로직:__
* 징표가 없는 플레이어(평화): 서로 공격 불가. 몬스터 사냥만 가능.
* 징표가 있는 플레이어(적대): 모든 플레이어(평화 및 적대)를 공격 가능.
* _구현:_ 마인크래프트의 Scoreboard Teams 기능을 활용하거나, PvP 매니지먼트 플러그인(예: Clans 또는 커스텀 PvP 플러그인)을 통해 CanHurt 플래그를 실시간으로 제어한다. 징표 활성화 시 캐릭터 주위에 붉은 글로우(Glowing Effect)를 부여하여 시각적으로 식별되게 한다.<sup>31</sup>

__7.2 증오의 씨앗 추출 의식__

플레이어가 몬스터나 다른 플레이어를 처치하면 '증오의 씨앗'을 얻는다. 이는 사망 시 전량 드롭된다.<sup>32</sup>



* __추출 제단 (Altar of Extraction):__ 맵의 특정 지점에 위치한다.
* __의식 프로세스:__
1. __시작:__ 제단 상호작용 시, 해당 지역의 모든 플레이어에게 "누군가 추출 의식을 시작했습니다!"라는 메시지와 좌표가 전송된다. (PvP 유도).
2. __방어:__ 50~60초의 카운트다운이 시작된다. 이 동안 플레이어는 제단 반경 10블록 밖으로 나가면 안 된다.<sup>33</sup>
3. __위협:__ 의식이 진행되는 동안 제단 주변에 몬스터들이 스폰되어 플레이어를 방해하고, 다른 플레이어들이 씨앗을 뺏으러 온다.
4. __완료:__ 타이머가 끝나면 인벤토리의 '증오의 씨앗'이 삭제되고, '붉은 가루'라는 영구 화폐로 변환되어 지급된다. 붉은 가루는 사망해도 드롭되지 않으며, 전용 상점에서 외형 아이템(치장성 장비, 탈것 방어구)을 구매하는 데 사용된다.<sup>34</sup>


---

__8. 네러티브 전달 및 환경 상호작용 시스템__

RPG의 몰입감은 텍스트가 아닌 경험에서 온다. 마인크래프트의 블록 세계를 디아블로의 고딕 호러 세계로 느끼게 하기 위한 장치들이 필요하다.

__8.1 시네마틱 카메라 및 스토리텔링__

중요한 스토리 지점(예: 릴리트의 흔적 발견, 보루 해방)에서는 플레이어의 조작을 멈추고 연출을 보여주어야 한다.



* __카메라 제어:__ Kingscenes 또는 ServerCinematics 플러그인을 사용하여, 플레이어 시점을 1인칭에서 분리, 미리 설정된 경로(Spline Path)를 따라 이동시킨다.<sup>15</sup>
* __연출:__ 카메라가 움직이는 동안 NPC들이 대화를 나누거나(홀로그램 텍스트/자막), 건물이 무너지는 등의 애니메이션을 보여준다. 이 동안 플레이어는 '관전자(Spectator)' 모드와 유사한 상태가 되어야 한다.

__8.2 지형 상호작용 (Traversal)__

디아블로 IV는 절벽 오르기, 밧줄 타기, 틈새 뛰어넘기 등 다양한 이동 액션을 통해 맵의 입체감을 살린다. 마인크래프트의 점프만으로는 이 느낌을 낼 수 없다.



* __상호작용 지점:__ 맵의 특정 블록(예: 하얀색 페인트가 칠해진 절벽, 밧줄)을 '이동 포인트'로 지정한다.
* __액션 구현:__
* _도약:_ 틈새 앞에서 스페이스바를 누르면, 서버가 플레이어에게 벡터(Vector) 값을 가해 반대편으로 포물선을 그리며 날아가게 한다.
* _등반:_ 절벽 앞에서 상호작용 시, 플레이어를 사다리 타는 모션(혹은 비행 모드)으로 전환하여 위로 이동시킨다.<sup>36</sup>
* 이러한 시스템은 단순히 멋을 위한 것이 아니라, 릴리트의 제단과 같은 숨겨진 요소를 배치하는 레벨 디자인의 핵심 도구로 활용된다.<sup>38</sup>


---

__9. 기술적 구현 전략 및 플러그인 생태계__

상기한 시스템들을 하나의 서버에서 유기적으로 구동하기 위한 기술 스택은 다음과 같다.

__9.1 필수 플러그인 및 도구__

 


<table>
  <tr>
   <td><strong>카테고리</strong>
   </td>
   <td><strong>추천 플러그인/도구</strong>
   </td>
   <td><strong>역할 및 용도</strong>
   </td>
  </tr>
  <tr>
   <td><strong>코어 엔진</strong>
   </td>
   <td><strong>Paper/Purpur (1.20+)</strong>
   </td>
   <td>고성능 서버 구동기. 비동기 청크 로딩 필수.
   </td>
  </tr>
  <tr>
   <td><strong>NPC & 스크립트</strong>
   </td>
   <td><strong>Citizens + Denizen</strong>
   </td>
   <td>복잡한 NPC 행동, 위상 변화, 상호작용 스크립팅의 핵심.<sup>39</sup>
   </td>
  </tr>
  <tr>
   <td><strong>퀘스트 & 스토리</strong>
   </td>
   <td><strong>BetonQuest</strong>
   </td>
   <td>비선형 퀘스트 구조, 데이터베이스 연동, 대화 트리 구현.<sup>40</sup>
   </td>
  </tr>
  <tr>
   <td><strong>인스턴스 던전</strong>
   </td>
   <td><strong>MythicDungeons</strong>
   </td>
   <td>악몽 던전 및 보루의 인스턴스 월드 생성 및 관리.<sup>27</sup>
   </td>
  </tr>
  <tr>
   <td><strong>몬스터 & 스킬</strong>
   </td>
   <td><strong>MythicMobs</strong>
   </td>
   <td>커스텀 몬스터 AI, 속성(Affix) 스킬, 보스 패턴 구현.<sup>29</sup>
   </td>
  </tr>
  <tr>
   <td><strong>UI & 리소스</strong>
   </td>
   <td><strong>Oraxen / ItemsAdder</strong>
   </td>
   <td>커스텀 GUI, 폰트, 아이템 텍스처, 사운드 관리.<sup>41</sup>
   </td>
  </tr>
  <tr>
   <td><strong>월드 관리</strong>
   </td>
   <td><strong>WorldGuard + Regions</strong>
   </td>
   <td>지역 발견, PvP 구역 설정, 속삭임 지역 트리거 관리.<sup>43</sup>
   </td>
  </tr>
  <tr>
   <td><strong>연출</strong>
   </td>
   <td><strong>Kingscenes</strong>
   </td>
   <td>인게임 컷신 및 카메라 워킹.<sup>15</sup>
   </td>
  </tr>
</table>


__9.2 데이터베이스 최적화 전략__

명망 시스템과 각종 수집 요소(제단, 보루 등)로 인해 플레이어별 데이터량이 방대해진다.



* __MySQL/MariaDB:__ 파일 기반(YAML/JSON) 저장은 입출력 병목을 유발하므로 반드시 SQL 데이터베이스를 사용해야 한다.
* __인덱싱 (Indexing):__ PlayerUUID와 RegionID를 결합 인덱스로 설정하여, 명망 점수 조회 속도를 최적화해야 한다.
* __비동기 처리 (Async Processing):__ 퀘스트 갱신, 명망 점수 계산 등 데이터베이스 쓰기 작업은 반드시 메인 스레드가 아닌 비동기 스레드에서 처리하여 렉(Lag)을 방지해야 한다.

__9.3 리소스 팩을 통한 분위기 조성__

시스템만큼 중요한 것이 시각/청각적 분위기이다.



* __폰트:__ 디아블로 특유의 고딕풍 폰트(Exocet 등)를 리소스 팩에 포함시켜, 모든 UI와 타이틀 메시지에 적용한다.<sup>44</sup>
* __사운드:__ 퀘스트 수락/완료음, 아이템 드롭음, 앰비언트 사운드(바람 소리, 비명 소리)를 원작과 유사한 고품질 오디오로 교체하여 몰입감을 극대화한다.<sup>45</sup>


---

__10. 결론__

디아블로 IV 기반 마인크래프트 RPG 서버 개발은 단순한 '모방'이 아니라 '재해석'의 과정이다. 원작의 핵심 재미인 **"탐험에 대한 보상(명망)", "살아있는 세계(위상 변화/지옥물결)", "무한한 도전(악몽 던전/속삭임)"**을 마인크래프트의 기술적 한계 내에서 구현하기 위해서는 __하이브리드 인스턴싱__과 __데이터 기반의 동적 렌더링__ 기술이 필수적이다.

본 보고서에서 제시한 아키텍처는 플레이어가 서버에 접속할 때마다 변화하는 세계를 경험하게 하며, 정적인 마인크래프트 맵을 동적인 '성역(Sanctuary)'으로 탈바꿈시킬 수 있는 구체적인 청사진을 제공한다. 성공적인 구현을 위해서는 기획자, 개발자, 빌더 간의 긴밀한 협업과 치밀한 데이터베이스 설계가 선행되어야 할 것이다.