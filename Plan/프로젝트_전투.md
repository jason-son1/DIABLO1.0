__디아블로 4 아키텍처 기반의 마인크래프트 RPG 서버 개발을 위한 심층 기술 분석 및 구현 전략 보고서__

__1. 서론: 복셀(Voxel) 환경에서의 ARPG 메커니즘 이식__

__1.1 보고서의 목적 및 배경__

본 보고서는 블리자드 엔터테인먼트의 액션 RPG *디아블로 4(Diablo IV)*의 전투 시스템, 아이템 체계, 캐릭터 성장 메커니즘을 심층 분석하여, 이를 마인크래프트(Minecraft) 서버 환경에 효과적으로 이식하기 위한 기술적 청사진을 제공하는 것을 목적으로 한다. 사용자의 요구사항에 따라 _디아블로 4_의 내부 코드를 그대로 복제하는 것이 아니라, 그 __'형태(Form)'와 '구조(Structure)'를 모방__하여 마인크래프트의 엔진 한계 내에서 가장 유사한 경험을 제공하는 데 주안점을 둔다. 특히 최신 확장팩인 _증오의 그릇(Vessel of Hatred, 시즌 6)_ 업데이트 내용을 반영하여, 변화된 데미지 공식과 정복자 시스템, 그리고 신규 직업 메커니즘을 마인크래프트의 주요 RPG 플러그인(MythicMobs, MMOCore, MMOItems, MythicLib)을 통해 구현하는 구체적인 방법론을 제시한다.

__1.2 마인크래프트와 디아블로의 엔진적 차이 극복__

마인크래프트는 기본적으로 1초당 20틱(20 TPS)으로 작동하는 틱 기반 엔진을 사용하며, 이는 디아블로 4와 같은 고해상도 물리 엔진 기반의 게임과는 근본적인 차이가 있다. 디아블로 4가 수백 마리의 몬스터를 동시에 처리하며 복잡한 연산을 수행하는 반면, 마인크래프트 서버는 엔티티(Entity) 수와 패킷 전송량에 민감하게 반응한다. 따라서 본 보고서는 단순한 시스템 분석을 넘어, __'데미지 버킷(Damage Buckets)' 이론의 재해석__, __상태 이상(Status Effects)의 경량화__, __엔티티 최적화(Entity Optimization)__ 등 서버 퍼포먼스를 고려한 구현 전략을 핵심적으로 다룬다.


---

__2. 전투 시스템의 수학적 기초: 데미지 버킷(Damage Buckets) 이론의 재해석__

디아블로 4의 전투가 깊이 있는 이유는 직관적인 공격력 수치 뒤에 숨겨진 복잡한 수학적 알고리즘, 즉 '데미지 버킷' 시스템 덕분이다. 마인크래프트의 단순한 (공격력 - 방어력) 공식을 탈피하고 디아블로 4의 전투 깊이를 구현하기 위해서는 이 수식을 MythicLib 및 MMOCore의 커스텀 데미지 공식으로 치환해야 한다.

__2.1 시즌 6(증오의 그릇) 기준 데미지 산출 공식 분석__

초기 디아블로 4는 치명타 피해와 취약 피해가 각각 독립적인 곱연산(Multiplicative) 그룹으로 분류되어 데미지 인플레이션이 극심했다. 그러나 시즌 6 업데이트를 거치며 블리자드는 이를 대대적으로 개편하였으며, 이는 마인크래프트 서버 밸런싱에 있어 매우 중요한 참조점이 된다.<sup>1</sup>

현재의 데미지 공식은 다음과 같이 요약할 수 있다:

 

선택하신 디아블로 4의 데미지 공식은 다음과 같습니다.

$$\text{Total Damage} = \text{Weapon} \times (1 + \sum \text{Additive}) \times (\prod \text{Global Multipliers}) \times \text{Crit Multiplier} \times \text{Vuln Multiplier}$$

이를 마인크래프트 서버(MMOItems, MMOCore, MythicLib 등)의 RPG 시스템에 적합하게 변환하면 아래와 같이 표현할 수 있습니다.

한글 설명식:

최종 데미지 = 무기 기본 공격력 × (1 + 합연산 그룹 총합) × (곱연산 그룹의 곱) × 치명타 배수 × 취약 배수

마인크래프트 서버 구현식(예시):

FinalDamage = BaseWeaponDamage × (1 + AdditiveTotal) × MultiplicativeTotal × CritMultiplier × VulnMultiplier


        l   BaseWeaponDamage: MMOItems의 무기 스탯(예: 250~350)에서 가져옴


        l   AdditiveTotal: MythicLib stat.yml에서 통합된 합연산 버킷 예) 근거리 피해, 상태이상 피해 등


        l   MultiplicativeTotal: 전설, 고유, 핵심 지속효과 등 곱연산 스탯들의 곱


        l   CritMultiplier: 치명타 시 적용되는 배수 (예: 1.5~2.0)


        l   VulnMultiplier: 취약 상태일 때 추가 배수 (예: 1.2)

즉, 각 요소를 서버 내 커스텀 스탯 및 공식에 맞게 매핑하여, 디아블로 4의 복잡한 데미지 산출 구조를 마인크래프트 RPG 환경에 그대로 적용할 수 있습니다.

 

이 수식을 마인크래프트 서버 개발 관점에서 분석하면 다음과 같은 구현 요소로 나눌 수 있다.

__2.1.1 무기 공격력 (Base Weapon Damage)__

모든 스킬 데미지의 기초가 되는 값이다. 마인크래프트의 기본 도구(다이아몬드 검 등)는 고정된 데미지를 가지지만, 디아블로 4는 무기마다 최소-최대 데미지 범위를 가진다.



* __구현 전략:__ __MMOItems__를 사용하여 모든 무기에 Attack Damage 스탯을 범위(예: 250~350)로 설정해야 한다. __MMOCore__ 스킬 설정 시 고정 데미지(예: 5)를 주는 대신, &lt;caster.stat.attack_damage> * 0.5 (무기 공격력의 50%)와 같은 형태로 플레이어의 장비 스펙을 동적으로 참조하도록 설정해야 한다.<sup>3</sup>

__2.1.2 합연산 그룹 (The Additive Bucket)__

'근거리에 있는 적에게 주는 피해', '군중 제어 상태 적에게 주는 피해', '출혈 중인 적에게 주는 피해' 등 조건부 데미지 옵션들은 과거 독립적으로 계산되었으나, 현재는 하나의 거대한 '합연산 버킷'으로 통합되었다.<sup>1</sup>



* __서버 밸런싱 통찰:__ 플레이어가 '근거리 피해 +30%'와 '출혈 피해 +20%'를 가지고 있다면, 실제 데미지 증가는 $1.3 \times 1.2 = 1.56$(56%)이 아니라, $1 + 0.3 + 0.2 = 1.5$(50%)가 된다. 이는 스탯의 효율 체감(Diminishing Returns)을 유발하여 특정 스탯만 기형적으로 높이는 것을 방지한다.
* __구현 전략:__ MythicLib의 stat.yml 설정에서 CUSTOM_DAMAGE_ADDITIVE라는 통합 변수를 생성하고, 아이템의 접두사/접미사(Affix)가 해당 변수에 가산되도록 설정한다. 이후 데미지 계산식에서 이 총합을 기본 데미지에 곱하는 방식을 취해야 한다.

__2.1.3 곱연산 그룹 (Global Multipliers)__

전설 위상(Aspect)이나 고유 아이템(Unique), 핵심 지속 효과(Key Passive)에서 "[x]20% 데미지 증가"라고 표기된 옵션들은 최종 데미지를 증폭시킨다.



* __구현 전략:__ 이는 합연산 버킷에 더해지는 것이 아니라, 최종 산출된 데미지에 별도로 곱해져야 한다. __MythicMobs__의 Damage Modifier 기능을 활용하여 특정 조건(예: 스킬 발동 시) 만족 시 최종 데미지에 x 1.2를 수행하는 로직을 짜야 한다.

__2.2 치명타 및 취약(Vulnerable) 시스템의 재설계__

시즌 2 이후 디아블로 4는 치명타와 취약 상태의 곱연산 배율을 고정하고, 추가적인 스탯은 합연산으로 전환했다.<sup>1</sup>


<table>
  <tr>
   <td><strong>구분</strong>
   </td>
   <td><strong>고정 곱연산 배율 (Hard Cap)</strong>
   </td>
   <td><strong>추가 스탯의 처리 방식 (Additive Conversion)</strong>
   </td>
  </tr>
  <tr>
   <td><strong>치명타 (Critical Strike)</strong>
   </td>
   <td>발동 시 데미지 <strong>x1.5</strong> (50% 증폭)
   </td>
   <td>장비의 "+치명타 피해 20%" 옵션은 곱연산 배율을 1.7로 늘리는 것이 아니라, <strong>합연산 버킷</strong>에 +20%를 더한다.
   </td>
  </tr>
  <tr>
   <td><strong>취약 (Vulnerable)</strong>
   </td>
   <td>상태이상 시 데미지 <strong>x1.2</strong> (20% 증폭)
   </td>
   <td>장비의 "+취약 피해 30%" 옵션은 곱연산 배율을 1.5로 늘리는 것이 아니라, <strong>합연산 버킷</strong>에 +30%를 더한다.
   </td>
  </tr>
</table>




* __개발 시사점:__ 이 구조는 마인크래프트 RPG 서버의 고질적인 문제인 '원샷킬(One-shot kill)' 문제를 해결하는 열쇠가 된다. 치명타 피해량이 무한정 곱연산으로 늘어나면 PvP나 보스 레이드 밸런스가 붕괴된다. 따라서 서버 내 기본 치명타 배율을 1.5로 고정하고, 아이템 옵션으로 얻는 치명타 피해는 합연산 그룹에 가산되도록 MythicLib 수식을 작성해야 한다.

__2.3 제압(Overpower) 메커니즘 분석__

제압은 공격자의 **현재 생명력(Current Life)**과 **보강된 생명력(Fortified Life)**의 합계에 비례하여 추가 데미지를 입히는 독특한 시스템이다.<sup>4</sup>



* __공식:__ $\text{Damage} + (\text{Current HP} + \text{Fortified HP}) \times \text{Overpower Multiplier} \times 0.03$ (기본 계수)
* __구현 전략:__
* 이 시스템은 체력이 높은 '탱커'형 빌드(드루이드, 바바리안)도 강력한 한 방 데미지를 낼 수 있게 한다.
* __MMOCore__ 스킬 설정에서 3% 확률(고정)로 제압이 발동하도록 설정하고, 발동 시 데미지 공식에 &lt;caster.hp> 변수를 포함시켜야 한다.
* __시각 효과:__ 제압 발동 시 하늘색(Cyan) 또는 주황색 폰트의 데미지 인디케이터(Hologram)를 띄워 일반 치명타(노란색)와 구분해야 타격감을 살릴 수 있다.<sup>3</sup>


---

__3. 상태 이상(Status Effects) 및 생존 메커니즘 구현__

디아블로 4의 전투 흐름은 단순히 체력을 깎는 것이 아니라, 적을 특정 상태(취약, 보강, 저지 불가 등)로 만들고 그에 따른 이득을 취하는 과정이다. 이를 마인크래프트에서 구현하기 위해서는 바닐라 포션 효과를 넘어서는 커스텀 태그 시스템이 필요하다.

__3.1 취약(Vulnerable) 상태 구현__

취약 상태인 적은 받는 피해가 20% 증가하며, 체력바가 보라색으로 빛난다.<sup>6</sup>



* __마인크래프트 구현:__
* __시각화:__ 1.9+ 버전의 Glowing 효과(발광 효과)를 사용하여 적의 테두리가 빛나게 처리하거나, 머리 위에 보라색 파티클을 표시한다.
* __메커니즘:__ 특정 스킬(예: 서리 화살) 적중 시 대상에게 Vulnerable이라는 MythicMobs 태그를 부여하고 타이머를 작동시킨다.
* __데미지 연산:__ MythicMobs의 전역 데미지 리스너(Global Damage Modifier)에서 Target hasTag Vulnerable 조건을 체크, 참일 경우 데미지를 1.2배로 증폭시킨다.

__3.2 보강(Fortify)과 보호막(Barrier)__

디아블로 4는 체력을 세 가지 레이어로 구분한다: __기본 생명력__, __보강__, __보호막__.

__3.2.1 보강 (Fortify)__

보강은 별도의 체력바처럼 차오르며, __보강 수치 > 현재 생명력__일 때 캐릭터는 '보강됨(Fortified)' 상태가 되어 15%의 데미지 감소 효과를 얻는다.<sup>4</sup>



* __데이터 구조:__ MMOCore의 커스텀 리소스(Resource) 기능을 활용하여 Fortify라는 자원을 생성한다. 이는 마나와 달리 자동으로 재생되지 않고 스킬을 통해서만 획득된다.
* __로직:__
1. 플레이어가 피격될 때마다 트리거가 작동한다.
2. 조건문: if (Fortify_Amount >= Current_Health)
3. 참일 경우: 들어오는 데미지에 x 0.85 처리.
4. 보강 수치는 시간이 지남에 따라 서서히 감소하도록 스케줄러를 설정한다.

__3.2.2 보호막 (Barrier)__

보호막은 체력보다 먼저 소모되는 임시 생명력이다.<sup>9</sup>



* __구현:__ 마인크래프트의 Absorption(흡수) 효과가 가장 유사하다. 그러나 바닐라 흡수 효과는 황금 사과 등으로 쉽게 덮어씌워질 수 있으므로, 별도의 변수 Barrier_HP를 운영하는 것이 안정적이다.
* __데미지 처리 순서:__
1. 피격 데미지 발생.
2. Barrier_HP가 존재하는지 확인.
3. 존재한다면 Barrier_HP에서 데미지 차감.
4. Barrier_HP가 0 이하로 떨어지면 남은 데미지를 실제 체력(HP)에서 차감.
5. __시각화:__ 보호막 존재 시 플레이어 주변에 유리(Glass) 혹은 얼음(Ice) 블록 디스플레이 엔티티가 회전하도록 하여 시각적 피드백을 제공한다.

__3.3 행운의 적중(Lucky Hit) 시스템__

디아블로 4에서 가장 오해하기 쉬운 스탯인 행운의 적중은 "발동 계수(Proc Coefficient)"이다.<sup>11</sup>



* __공식:__ $\text{실제 발동 확률} = \text{스킬의 행운 적중 확률} \times (1 + \text{행운 적중 보너스}) \times \text{효과 발동 확률}$
* __예시:__ '행운의 적중: 5% 확률로 체력 회복' 옵션이 있고, 행운 적중률 50%(0.5)인 스킬을 사용한다면, 실제 발동 확률은 $0.5 \times 0.05 = 0.025$ (2.5%)가 된다.
* __서버 밸런싱의 핵심:__ 이 시스템은 공격 속도가 빠른 스킬(예: 로그의 연타)과 느린 스킬(예: 소서러의 유성) 간의 형평성을 맞추는 장치다. 마인크래프트 서버에서도 공격 속도가 빠른 무기나 스킬이 특수 효과(번개, 빙결 등)를 너무 자주 발동시키는 것을 방지하기 위해 각 MMOCore 스킬마다 Lucky_Hit_Coefficient 변수를 할당해야 한다.
* 빠른 스킬: 계수 0.1~0.2
* 느린 광역 스킬: 계수 0.8~1.0
* 효과 발동 시 Random(0, 1) &lt; (Player_Bonus * Skill_Coefficient) 조건을 검사한다.


---

__4. 직업별 고유 메커니즘(Class Mechanics) 아키텍처__

디아블로 4의 직업들은 단순히 스킬만 다른 것이 아니라, 아예 다른 자원 시스템과 고유 메커니즘을 가진다. 이를 마인크래프트 플러그인으로 구현하기 위한 구조적 설계를 제시한다.

__4.1 야만용사(Barbarian): 아스날(Arsenal) 시스템__

야만용사는 네 개의 무기(양손 둔기, 양손 베기, 쌍수 무기 2개)를 동시에 착용하고 스킬에 따라 자동으로 무기를 바꿔가며 싸운다.<sup>14</sup>



* __마인크래프트의 한계:__ 마인크래프트는 주무기와 보조무기 슬롯만 존재한다.
* __해결책: 가상 장비 슬롯(Virtual Equipment Slots)__
* __Oraxen__ 또는 커스텀 GUI 플러그인을 사용하여 인벤토리가 아닌 별도의 메뉴에 무기를 '등록'하게 한다.
* 실제 인벤토리에는 '아스날 활성기' 같은 아이템 하나만 둔다.
* __스킬 매핑:__
* 스킬 A(예: 선조의 망치) 사용 시 -> 플러그인이 '양손 둔기' 슬롯에 등록된 아이템의 스탯(공격력, 옵션)을 불러와 데미지를 계산한다.
* 스킬 B(예: 이중 타격) 사용 시 -> '쌍수 무기' 슬롯의 데이터를 불러온다.
* __무기 숙련도(Weapon Expertise):__ 플레이어가 특정 태그(예: Category_Axe)를 가진 무기 데이터로 데미지를 줄 때마다 Mastery_Axe 변수를 증가시킨다. 일정 수치 도달 시 패시브 스킬(예: 부상당한 적 치명타 확률 증가)을 활성화한다.

__4.2 드루이드(Druid): 영혼 은총(Spirit Boons)__

드루이드는 몬스터에게서 '영혼 공물(Spirit Offerings)'을 수집하여 4종류의 동물 영혼(사슴, 독수리, 늑대, 뱀)에게 바치고 패시브 효과를 해금한다.<sup>16</sup>



* __구현:__
* __수집품:__ 몬스터 전리품 테이블(Drop Table)에 Spirit Offering 아이템을 5% 확률로 추가한다.
* __GUI 시스템:__ 투르 듈라(Tur Dulra) NPC를 통해 열 수 있는 Chest GUI를 만든다.
* __변수 제어:__
* 플레이어가 '독수리' 아이템을 클릭하면 P_Spirit_Eagle_Unlocked = 1 변수가 저장된다.
* 해금된 상태에서 특정 버프를 선택하면 Passive_Crit_Chance 같은 스탯 보너스를 부여한다.
* __영혼 결속(Spirit Bonding):__ 하나의 영혼과는 결속을 맺어 두 개의 버프를 활성화할 수 있다. GUI 로직에서 if (Active_Boons > 5)가 되면 선택을 막는 조건문이 필요하다.

__4.3 강령술사(Necromancer): 망자의 서(Book of the Dead)__

소환수(해골 전사, 해골 마법학자, 골렘)의 종류를 커스터마이징하거나, 소환을 포기하고 본체의 스탯을 올리는 희생(Sacrifice) 시스템이다.<sup>18</sup>



* __MythicMobs 활용:__
* 각 소환수 변형(Variant)마다 다른 Mob 파일을 생성한다.
* Skeleton_Skirmisher: 체력 낮음, 공격력 높음, 이동속도 빠름.
* Skeleton_Defender: 체력 높음, 방패 들기(Shield Block) AI 탑재.
* __선택 UI:__ /bookofthedead 명령어로 GUI를 열어 변수 Summon_Type을 변경한다. 소환 스킬은 이 변수를 참조하여 SpawnMob{type=&lt;caster.var.Summon_Type>} 형태로 작동한다.
* __희생 메커니즘:__ '희생' 선택 시 소환 스킬을 비활성화(Cooldown을 무한으로 설정하거나 시전을 막음)하고, 대신 플레이어에게 영구적인 버프(예: 암흑 피해 +15%)를 부여한다.

__4.4 도적(Rogue): 연계 점수(Combo Points) 및 주입(Imbuement)__



* __연계 점수:__ 기본 기술로 점수를 쌓고, 핵심 기술로 소모하여 데미지를 증폭시킨다.<sup>20</sup>
* __MMOCore 자원:__ Combo_Points라는 최대치 3의 자원을 만든다.
* __스킬 로직:__ 핵심 기술(Core Skill) 사용 시 Combo_Points를 모두 소모하며, 소모된 양에 비례해 데미지 계수를 곱한다. (예: Damage = Base * (1 + 0.5 * Combo_Points))
* __주입:__ 무기에 독, 암흑, 냉기 속성을 부여한다.
* 주입 스킬 사용 시 Imbue_Charges = 2 변수를 설정한다.
* 다음 공격 시 if (Imbue_Charges > 0)을 체크하여 추가 속성 피해(MythicMobs Skill)를 발동시키고 변수를 1 감소시킨다.

__4.5 원소술사(Sorcerer): 마법부여(Enchantment) 슬롯__

스킬을 전용 슬롯에 장착하면, 직접 시전하지 않아도 특정 조건에서 자동으로 발동된다.<sup>22</sup>



* __구현 난이도 상:__ 이를 구현하기 위해서는 '트리거(Trigger)' 시스템이 필요하다.
* __예시:__ '화염구'를 마법부여 슬롯에 장착.
* 서버는 플레이어에게 OnKill 리스너를 등록한다.
* 플레이어가 적을 처치할 때마다 Chance(50%)로 사망한 적의 위치에 Fireball_Explosion 스킬(데미지 50% 보정)을 발동시킨다.
* 이를 위해 MMOCore의 스킬 설정 파일 외에, 별도의 '패시브 트리거' 관리 플러그인(또는 스크립트) 연동이 필요하다.

__4.6 혼령사(Spiritborn): 활력(Vigor) 및 이동 메커니즘__

시즌 6 신규 직업인 혼령사는 빠른 기동성과 '활력' 자원을 사용한다.<sup>24</sup>



* __이동기 구현:__ 마인크래프트의 Velocity 벡터 조작을 통해 구현한다. 예를 들어, '도약' 스킬은 플레이어의 벡터를 LookingDirection * 1.5로 설정하여 순간적으로 앞으로 튀어나가게 한다.
* __활력 관리:__ 활력은 자연 회복되지 않고 기본 공격 시 차오른다. MMOCore의 Mana Regeneration을 0으로 설정하고, 기본 공격 스킬에 restore_mana 옵션을 추가하여 타격 시에만 자원이 회복되도록 설정한다.


---

__5. 아이템 체계와 경제 시스템: 파밍의 재미 구현__

디아블로 4의 핵심 루프는 아이템 파밍이다. 마인크래프트의 기본 인챈트 시스템을 버리고, MMOItems를 활용하여 디아블로의 복잡한 아이템 체계를 구축해야 한다.

__5.1 위상(Aspect) 시스템과 보석(Gem)의 융합__

디아블로 4에서는 전설 아이템의 특수 능력(위상)을 추출하여 다른 아이템에 각인할 수 있다. 마인크래프트에서는 이를 __'보석 소켓(Gem Socket)' 시스템__으로 구현하는 것이 가장 효율적이다.<sup>25</sup>



* __설계:__ 전설 위상을 MMOItems의 '보석(Gem Stone)' 타입 아이템으로 제작한다.
* 아이템 이름: Aspect of the Protector (보석)
* 능력: "정예 몬스터 타격 시 10초 동안 보호막 생성" (MythicMobs 스킬 연결)
* __각인(Imprinting):__ 플레이어는 희귀(Rare) 등급 아이템에 있는 소켓에 이 보석을 장착함으로써 전설 아이템을 완성한다. 이는 디아블로 4의 '각인' 시스템과 사용자 경험(UX) 측면에서 매우 유사하다.

__5.2 담금질(Tempering)과 명품화(Masterworking) 시뮬레이션__

시즌 4 이후 도입된 담금질은 아이템에 새로운 옵션을 추가하고, 명품화는 옵션 수치를 강화한다.<sup>27</sup>



* __담금질 (Tempering):__ MMOItems의 '소모품(Consumable)'을 사용하여 구현한다.
* Tempering Manual: Weapons라는 소모품을 무기에 사용하면, 확률적으로 "근거리 피해 +20%" 또는 "제압 피해 +15%" 스탯이 영구적으로 추가되도록 설정한다. (MMOItems의 Volatile 옵션이나 스탯 부여 기능 활용)
* __명품화 (Masterworking):__ MMOItems의 '업그레이드(Upgrade)' 시스템을 활용한다.
* 대장장이 NPC를 통해 아이템을 강화할 때마다 스탯이 5%씩 증가하게 설정한다.
* 특정 단계(4강, 8강, 12강)에서는 무작위 하나의 옵션이 대폭 상승(Crit)하도록 설정해야 하는데, 이는 기본 플러그인 기능으로는 어려우므로 별도의 스크립트나 커스텀 애드온 개발이 필요할 수 있다.

__5.3 아이템 생성과 RNG (Random Number Generation)__

디아블로의 아이템은 드랍되는 순간 옵션이 무작위로 결정된다.



* __MMOItems 템플릿:__ Generation Template 기능을 사용하여 아이템을 정의한다.<sup>28</sup>
* __접두사(Prefix) 목록:__ 날카로운(공격력), 단단한(방어력), 민첩한(회피율)
* __접미사(Suffix) 목록:__ 곰의(체력), 여우의(치명타), 거머리의(흡혈)
* __수치 범위:__ 각 옵션은 base: 10, spread: 0.2와 같이 설정하여 8~12 사이의 값이 무작위로 부여되도록 한다. 이를 통해 유저들은 '으뜸 옵션(Max Roll)'을 얻기 위해 반복 파밍을 하게 된다.


---

__6. 서버 최적화 및 기술적 한계 극복 (Technical constraints & Optimization)__

마인크래프트 서버에서 디아블로 4를 구현할 때 가장 큰 적은 '렉(Lag)'이다. 20 TPS를 유지하기 위한 기술적 가이드라인이다.<sup>30</sup>

__6.1 엔티티 밀도 관리 (Entity Density Management)__

디아블로 4처럼 화면에 50마리의 몬스터가 나오는 것은 마인크래프트에서 불가능하다. 50마리의 MythicMobs 엔티티가 복잡한 AI와 스킬을 사용하면 TPS가 한 자리수로 떨어진다.



* __질적 향상 전략(Quality over Quantity):__ 몬스터의 수를 줄이는 대신(5~8마리), 개체 하나하나를 강력하게 만든다. '정예(Elite)' 몬스터 위주로 스폰시키고, 체력과 보상을 높인다.
* __디스플레이 엔티티 활용:__ 1.19.4 이후 추가된 Display Entity(Item Display, Block Display)는 서버 리소스를 거의 먹지 않는다. 화려한 스킬 이펙트나 장식용 오브젝트는 반드시 아머 스탠드가 아닌 디스플레이 엔티티를 사용해야 한다.<sup>30</sup>

__6.2 데미지 인디케이터(DDI) 최적화__

RPG 서버 렉의 주범 중 하나는 타격 시마다 생성되는 데미지 숫자(Hologram)다.



* __패킷 기반 처리:__ 실제 엔티티(아머 스탠드)를 소환하지 말고, 클라이언트에게만 보이는 패킷 기반 홀로그램을 사용해야 한다 (MythicLib 내장 기능 활용).
* __필터링:__ 모든 데미지를 표시하지 않는다. 100 이하의 자잘한 데미지는 표시하지 않거나, 치명타(노란색), 제압(하늘색), 취약(보라색) 공격만 표시하도록 설정하여 시각적 정보를 압축한다.<sup>34</sup>

__6.3 월드 스케일링(World Scaling)과 레벨 디자인__

오픈 월드인 디아블로 4는 플레이어 레벨에 맞춰 몬스터가 강해진다.



* __MythicMobs World Scaling:__ 랜덤 스포너(Random Spawner) 설정에서 UseWorldScaling: true를 활성화한다.
* __공식:__ 몬스터 스탯 = $V \times 1.05^{(\text{PlayerLevel} - 1)}$ (레벨당 5% 기하급수적 증가).
* __지역별 티어 구분:__ 마인크래프트 월드를 WorldGuard 리전으로 나누어 지역별로 최소/최대 레벨을 설정한다.
* 조각난 봉우리 (Lv 1-25)
* 스코스글렌 (Lv 25-50)
* 메마른 평원 (Lv 50-70)
* 지옥물결(Helltide) 지역: 서버 시간(예: 매 정각)에 따라 특정 리전의 몬스터 레벨을 +20 보정하고 드랍율을 높이는 스크립트를 적용한다.


---

__7. 결론 및 제언__

본 보고서를 통해 분석한 바와 같이, 마인크래프트 내에 _디아블로 4_를 구현하는 것은 단순한 모방이 아니라 __핵심 경험의 재구성__ 과정이다.



1. __수학적 깊이:__ 시즌 6의 변경된 __데미지 버킷(Damage Buckets)__ 공식, 특히 치명타와 취약의 곱연산 제한(Hard Cap)을 적용하여 서버 경제와 밸런스의 지속 가능성을 확보해야 한다.
2. __직업 정체성:__ 각 직업의 고유 메커니즘(아스날, 망자의 서 등)은 인벤토리 GUI와 변수 시스템을 결합하여 구현함으로써, 단순한 스킬 셋 차이를 넘어선 __플레이 스타일의 다양성__을 제공해야 한다.
3. __최적화:__ 마인크래프트의 20 TPS 한계를 인정하고, 다수의 몬스터보다는 소수의 강력한 정예 몬스터와 디스플레이 엔티티를 활용한 시각 효과로 타격감을 보완해야 한다.
4. __아이템 루프:__ MMOItems의 템플릿 시스템과 보석(위상) 시스템을 통해 디아블로 특유의 **'파밍-세팅-성장'**의 중독성 있는 루프를 완성해야 한다.

이 프로젝트는 마인크래프트 서버 개발의 기술적 정점에 도전하는 과제이며, 성공적인 구현 시 기존 양산형 RPG 서버들과는 차별화된 깊이 있는 게임플레이 경험을 제공할 수 있을 것이다. 개발팀은 본 보고서에 제시된 수식과 아키텍처를 바탕으로 프로토타입을 제작하고, 지속적인 TPS 모니터링을 통해 최적화 밸런스를 맞춰나갈 것을 권장한다.


---

__주요 참고 자료 (References):__



* _데미지 공식 및 시즌 6 변경점_: <sup>1</sup>
* _상태 이상(제압, 취약, 행운 적중)_: <sup>4</sup>
* _직업별 메커니즘_: <sup>14</sup>
* _플러그인 기술 문서 (MythicMobs, MMOItems)_: <sup>21</sup>
* _서버 최적화_: <sup>30</sup> 